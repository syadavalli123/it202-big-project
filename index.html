<!DOCTYPE html>
<html>

    <head>
        <meta name="viewport" content="initial-scale=1.0">
        <meta charset="utf-8">
        <link href="https://unpkg.com/material-components-web@v4.0.0/dist/material-components-web.min.css" rel="stylesheet">
        <script src="https://unpkg.com/material-components-web@v4.0.0/dist/material-components-web.min.js"></script>
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="css/style.css" />
    </head>

    <body>
        
        <aside class="mdc-drawer mdc-drawer--modal">
            
            <div class="mdc-drawer__content">
                <nav class="mdc-list">
                    <a class="mdc-list-item mdc-list-item--activated" id="#home" href="#home" aria-current="page">
                        <i class="material-icons mdc-list-item__graphic" aria-hidden="true">home</i>
                        <span class="mdc-list-item__text">Home</span>
                    </a>
                    <a class="mdc-list-item" id="#data" href="#data">
                        <i class="material-icons mdc-list-item__graphic" aria-hidden="true">insert_chart_outlined</i>
                        <span class="mdc-list-item__text">Data</span>
                    </a>
                    <a class="mdc-list-item" id="#search-history" href="#search-history">
                        <i class="material-icons mdc-list-item__graphic" aria-hidden="true">history</i>
                        <span class="mdc-list-item__text">Search History</span>
                    </a>
                    <a class="mdc-list-item" id="#weather" href="#weather">
                        <i class="material-icons mdc-list-item__graphic" aria-hidden="true">wb_cloudy</i>
                        <span class="mdc-list-item__text">Weather</span>
                    </a>
                </nav>
            </div>
        </aside>

        <div class="mdc-drawer-scrim"></div>

        <header class="mdc-top-app-bar">
            <div class="mdc-top-app-bar__row">
                <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                    <button class="material-icons mdc-top-app-bar__navigation-icon mdc-icon-button">menu</button>
                    <span class="mdc-top-app-bar__title">Title</span>
                </section>
                <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" role="toolbar">
                    <button class="material-icons mdc-top-app-bar__action-item mdc-icon-button" aria-label="Download">file_download</button>
                    <button class="material-icons mdc-top-app-bar__action-item mdc-icon-button" aria-label="Print this page">print</button>
                    <button class="material-icons mdc-top-app-bar__action-item mdc-icon-button" aria-label="Bookmark this page">bookmark</button>
                </section>
            </div>
        </header>

        <main class="mdc-top-app-bar--fixed-adjust">
            <div class="view" id="home">
                Home
            </div>
            <div class="view" id="data">
                Data
                <div>
                    This screen will display a table that includes detailed info of crimes that occur in the Chicago area.
                </div>
                <div style="padding-bottom: 20px">
                    Enter any value to filter the data on Chicago Crimes.
                </div>
                <div>
                    <input list="inputValues" id="list">
                   
                    <button id="addValue" class="mdc-button mdc-button--raised">
                        <div class="mdc-button__ripple"></div>
                        <span class="mdc-button__label">Add Value</span>
                    </button>

                    <!-- Add display list of selected countries below-->
                    <ul class="mdc-list">
                    </ul>
                </div>
                <div class="mdc-data-table">
                    <table class="mdc-data-table__table" aria-label="Chicago Crimes Data">
                        <thead>
                            <tr class="mdc-data-table__header-row">
                                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Date</th>
                                <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Comments</th>
                            </tr>
                        </thead>
                        <tbody class="mdc-data-table__content">
                            <tr class="mdc-data-table__row">
                                <td class="mdc-data-table__cell">Frozen yogurt</td>
                                
                                <td class="mdc-data-table__cell">Super tasty</td>
                            </tr>
                            <tr class="mdc-data-table__row">
                                <td class="mdc-data-table__cell">Ice cream sandwich</td>
                                <td class="mdc-data-table__cell">I like ice cream more</td>
                            </tr>
                            <tr class="mdc-data-table__row">
                                <td class="mdc-data-table__cell">Eclair</td>
                                <td class="mdc-data-table__cell">New filing flavor</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="view" id="search-history">
                Search History
            </div>
            <div class="view" id="weather">
                Current Weather
                <ul class="mdc-list mdc-list--two-line">
                  <li id="cityName" class="mdc-list-item">
                    <span class="mdc-list-item__text">
                      <span class="mdc-list-item__primary-text">Two-line item</span>
                      <span class="mdc-list-item__secondary-text">Secondary text</span>
                    </span>
                  </li>
                  <li id="weatherDesc" class="mdc-list-item">
                    <span class="mdc-list-item__text">
                      <span class="mdc-list-item__primary-text">Two-line item</span>
                      <span class="mdc-list-item__secondary-text">Secondary text</span>
                    </span>
                  </li>
                  <li class="mdc-list-item">
                    <span class="mdc-list-item__text">
                      <span class="mdc-list-item__primary-text">Two-line item</span>
                      <span class="mdc-list-item__secondary-text">Secondary text</span>
                    </span>
                  </li>
                  <li class="mdc-list-item">
                    <span class="mdc-list-item__text">
                      <span class="mdc-list-item__primary-text">Two-line item</span>
                      <span class="mdc-list-item__secondary-text">Secondary text</span>
                    </span>
                  </li>
                </ul>
                
            </div>
        </main>
        
        <script>
            
            mdc.topAppBar.MDCTopAppBar.attachTo(document.querySelector('header.mdc-top-app-bar'));
            const drawer = mdc.drawer.MDCDrawer.attachTo(document.querySelector('.mdc-drawer'));
            document.querySelector(".mdc-top-app-bar__navigation-icon").addEventListener("click", (e) => {
                drawer.open = true;
            });
            
            const hideViews = () => {
            document.querySelectorAll("div.view").forEach(item => {
                    item.style.display = "none";
                });
            }

            document.querySelector(".mdc-top-app-bar__navigation-icon").addEventListener("click", (e) => {
                drawer.open = true;
            });

            document.querySelectorAll("aside.mdc-drawer a.mdc-list-item").forEach(item => {
                item.addEventListener("click", event => {
                    //handle click
                    hideViews();
                    let target = item.getAttribute("href");
                    document.querySelector(target).style.display = "block";
                    drawer.open = false;

                });
            });
            
            const url = "https://data.cityofchicago.org/resource/ijzp-q8t2.json";
            // Crimes
            document.querySelector("#addValue").addEventListener("click", e => {
                let value = document.querySelector("input#list").value;
                fetch(url)
                .then(response => {
                    return response.json();
                }).then(data => {
                    console.log(value);
                    console.log(data);
                });
            });
            
            
            // Current weather at current location.
            navigator.geolocation.getCurrentPosition(position => {
                lat = position.coords.latitude;
                lng = position.coords.longitude;
                console.log(lat);
                console.log(lng);
                    
                let list = document.querySelector("ul.mdc-list.mdc-list--two-line");
                    
                fetch(`//api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lng}&appid=e83f267b90cf757bf81a3fea3fa354d4`)
                .then(response => {
                    return response.json();
                }).then(data => {
                    console.log(data); 
                    let listItemOne = list.querySelector("li#cityName");
                    listItemOne.querySelector("span.mdc-list-item__primary-text").textContent = data["name"] + ", " + data["sys"]["country"];
                    listItemOne.querySelector("span.mdc-list-item__secondary-text").textContent = "Current location.";
                    
                    let listItemTwo = list.querySelector("li#weatherDesc");
                    listItemTwo.querySelector("span.mdc-list-item__primary-text").textContent = data["weather"][0]["description"];
                    listItemTwo.querySelector("span.mdc-list-item__secondary-text").textContent = "Current weather.";
                    
                });
            });
            
            // API Data Sources
             // Crimes (2001 - Present)
             // https://data.cityofchicago.org/resource/ijzp-q8t2.json
             // 
             // Weather API
             // https://openweathermap.org/api
             // 
             
        </script>
    </body>

</html>